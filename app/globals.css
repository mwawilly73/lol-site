/* app/globals.css
   Base sombre + utilitaires + flip 3D propre
   (AUCUN bouton/overlay, version stable) */

/* Tailwind v4+ (si tu l’utilises) */
@import "tailwindcss";

/* Thème */
:root{
  --bg:#0b0e14;
  --fg:#e6e6e6;
  --fg-muted:#c7c7c7;
  --border:rgba(255,255,255,.12);
  --panel:rgba(255,255,255,.05);
  --panel-weak:rgba(255,255,255,.04);
  --accent:#8ab4f8;
  --shadow-sm:0 4px 12px rgba(0,0,0,.18);
  --shadow-md:0 8px 24px rgba(0,0,0,.24);
}

html,body{height:100%}
html{
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-y:scroll;
}
body{background:var(--bg);color:var(--fg)}

/* Conteneur */
.container-lg{max-width:80rem;margin-inline:auto;padding-inline:1rem}

/* Liens */
a{color:var(--accent);text-underline-offset:2px}
a:hover{text-decoration:underline}
a:focus-visible{outline:2px solid var(--accent);outline-offset:2px;text-decoration:none}

/* Paragraphes */
p{color:var(--fg-muted)}

/* Sélection */
::selection{background:rgba(138,180,248,.22);color:var(--fg)}

/* Inputs/boutons basiques */
input[type="text"],input[type="search"],input:not([type]){
  background:var(--panel);
  border:1px solid var(--border);
  color:var(--fg);
  border-radius:.5rem;
  padding:.55rem .7rem;
}
input:focus-visible{outline:2px solid var(--accent);outline-offset:2px;border-color:transparent}
button{cursor:pointer;border:1px solid var(--border);background:var(--panel);color:var(--fg);
  border-radius:.55rem;padding:.55rem .8rem;transition:background-color .2s ease,transform .06s ease}
button:hover{background:var(--panel-weak)}
button:active{transform:translateY(1px)}

/* Badges */
.badge{
  display:inline-flex;align-items:center;gap:.35rem;height:1.75rem;padding:0 .6rem;
  border-radius:9999px;font-size:.75rem;border:1px solid var(--border);background:var(--panel)
}
.badge.info{border-color:rgba(138,180,248,.35);background:rgba(138,180,248,.12);color:#dbeafe}
.badge.danger{border-color:rgba(255,107,107,.35);background:rgba(255,107,107,.12);color:#fecaca}
.badge.success{border-color:rgba(74,222,128,.35);background:rgba(74,222,128,.12);color:#bbf7d0}

/* Grille cartes (fallback si pas Tailwind) */
.cards-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem}
@media (min-width:640px){.cards-grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
@media (min-width:768px){.cards-grid{grid-template-columns:repeat(4,minmax(0,1fr))}}
@media (min-width:1280px){.cards-grid{grid-template-columns:repeat(5,minmax(0,1fr))}}

/* ───────── Flip 3D PROPRE (image droite, texte lisible) ───────── */
/* ---- FLIP 3D : carte + faces ---- */
.flip-scene{
  perspective: 1200px;              /* profondeur 3D */
}

.flip-card{
  position: relative;               /* ancre des enfants abs. */
  width: 100%;
  aspect-ratio: 4 / 5;              /* hauteur stable sans padding hack */
  border-radius: .75rem;
  overflow: hidden;                  /* rien ne déborde */
  border: 1px solid var(--border);
  background: var(--panel-weak);
  box-shadow: var(--shadow-sm);

  transform-style: preserve-3d;
  transform-origin: center center;
  transition: transform 700ms cubic-bezier(.22,.61,.36,1);
  will-change: transform;
}

.flip-card.is-revealed{
  transform: rotateY(180deg);
}

/* Perf cartes hors écran */
.card-content-visibility {
  content-visibility: auto;
  /* taille intrinsèque approximative pour éviter le “saut” à l’apparition */
  contain-intrinsic-size: 300px 375px; /* ~ ratio 4/5 de tes vignettes */
}

.flip-face{
  position: absolute;
  inset: 0;                          /* occupe toute la carte */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  overflow: hidden;                  /* coupe l’intérieur si besoin */
  transform: translateZ(0);
}

/* Avant : dos de carte */
.flip-front{
  display: grid;
  place-items: center;
  background:
    radial-gradient(60% 60% at 30% 30%, rgba(255,255,255,.08), transparent 40%),
    linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  z-index: 1;                        /* sous la face back quand révélée */
}

/* Arrière : PRÉ‑tournée à 180° pour que son contenu soit lisible après flip */
.flip-back{
  position: absolute;
  inset: 0;
  transform: rotateY(180deg);
  background: var(--panel);
  z-index: 2;                        /* au-dessus du front quand révélé */
}
/* ---- Image (toujours montée) ---- */
.flip-back .art{
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover; object-position: center;
  opacity: 0;                        /* fade-in quand révélée */
  transition: opacity 140ms linear;
  transform: translateZ(0.01px);     /* stabilité compositing */
}

.flip-card.is-revealed .flip-back .art{
  opacity: 1;
}

/* L’image ne “flip” pas visuellement (ton astuce validée) */
.flip-back .no-flip{
  transform: rotateY(1deg) translateZ(0.01px);
  transform-style: preserve-3d;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* ---- LÉGENDE EN BAS, DANS LA CARTE ---- */
.flip-caption{
  position: absolute;
  left: 0; right: 0;
  bottom: 0;                         /* EN BAS de la carte */
  z-index: 3;                        /* au-dessus de l’image */
  padding: .45rem .6rem;

  background: rgba(0,0,0,.42);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);

  /* empêcher tout “décrochage” : reste dans la carte et ne dépasse pas */
  max-height: 45%;                   /* ajuste si tu veux plus/moins haut */
  overflow: hidden;                  /* coupe si trop long */
}

.flip-caption .name{
  font-size: .9rem; font-weight: 700; color: #fff;
}
.flip-caption .title{
  font-size: .72rem; color: rgba(255,255,255,.88);
}
.flip-caption .meta{
  margin-top: .25rem; display: flex; flex-wrap: wrap;
  gap: .25rem .35rem; color: #fff; font-size: 10px;
}
.flip-caption .pill{
  padding: 2px 6px; border-radius: 9999px;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.14);
}



/* Ligne d’infos/timer */
.info-row{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:space-between}
.progress{height:10px;border-radius:9999px;border:1px solid var(--border);background:rgba(255,255,255,.08);overflow:hidden}
.progress > .bar{height:100%;background:rgba(255,255,255,.5);transition:width .3s ease}
