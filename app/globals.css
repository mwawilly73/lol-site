/* app/globals.css
   Base sombre + utilitaires + flip 3D propre
   (version stable adaptée à TON fichier, avec ajouts a11y/perf) */

/* Tailwind v4+ (si tu l’utilises) */
@import "tailwindcss";

/* Thème */
:root{
  --bg:#0b0e14;
  --fg:#e6e6e6;
  --fg-muted:#c7c7c7;
  --border:rgba(255,255,255,.12);
  --panel:rgba(255,255,255,.05);
  --panel-weak:rgba(255,255,255,.04);
  --accent:#8ab4f8;
  --shadow-sm:0 4px 12px rgba(0,0,0,.18);
  --shadow-md:0 8px 24px rgba(0,0,0,.24);
}

html,body{height:100%}
html{
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-y:scroll;
}
body{background:var(--bg);color:var(--fg)}


/* === Site-wide background (fixe, sombre, LoL) ===================== */
:root{
  /* Change l’URL si tu veux une autre image */
  --site-bg-url: url("/bg/bilgewaterBackground01ia.webp");
}

/* Important: crée un contexte pour superposer le ::before proprement */
body{
  position: relative;
  z-index: 0;
}

/* Image de fond fixée (pas de scroll), sombre + légère blur pour lisibilité */
body::before{
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;               /* sous tout le contenu, au-dessus du background uni */
  pointer-events: none;      /* aucun impact sur les clics */
  background-image: var(--site-bg-url);
  background-size: cover;
  background-position: 50% 45%;
  background-repeat: no-repeat;

  /* ambiance sombre/LoL + lisibilité du texte */
  filter: brightness(0.35) saturate(0.9) contrast(0.9) blur(2px);

  /* vignette douce pour éviter les bords trop clairs */
  mask-image: radial-gradient(120% 100% at 50% 35%, rgba(0,0,0,1) 40%, rgba(0,0,0,0.85) 60%, rgba(0,0,0,0.6) 100%);
  -webkit-mask-image: radial-gradient(120% 100% at 50% 35%, rgba(0,0,0,1) 40%, rgba(0,0,0,0.85) 60%, rgba(0,0,0,0.6) 100%);

  /* perf */
  transform: translateZ(0);
  will-change: transform, filter;
}



/* Conteneur */
.container-lg{max-width:80rem;margin-inline:auto;padding-inline:1rem}

/* Liens */
a{color:var(--accent);text-underline-offset:2px}
a:hover{text-decoration:underline}
a:focus-visible{outline:2px solid var(--accent);outline-offset:2px;text-decoration:none}

/* Paragraphes */
p{color:var(--fg-muted)}

/* Sélection */
::selection{background:rgba(138,180,248,.22);color:var(--fg)}

/* Inputs/boutons basiques */
input[type="text"],input[type="search"],input:not([type]){
  background:var(--panel);
  border:1px solid var(--border);
  color:var(--fg);
  border-radius:.5rem;
  padding:.55rem .7rem;
}
input:focus-visible{outline:2px solid var(--accent);outline-offset:2px;border-color:transparent}
button{cursor:pointer;border:1px solid var(--border);background:var(--panel);color:var(--fg);
  border-radius:.55rem;padding:.55rem .8rem;transition:background-color .2s ease,transform .06s ease}
button:hover{background:var(--panel-weak)}
button:active{transform:translateY(1px)}

/* Badges */
.badge{
  display:inline-flex;align-items:center;gap:.35rem;height:1.75rem;padding:0 .6rem;
  border-radius:9999px;font-size:.75rem;border:1px solid var(--border);background:var(--panel)
}
.badge.info{border-color:rgba(138,180,248,.35);background:rgba(138,180,248,.12);color:#dbeafe}
.badge.danger{border-color:rgba(255,107,107,.35);background:rgba(255,107,107,.12);color:#fecaca}
.badge.success{border-color:rgba(74,222,128,.35);background:rgba(74,222,128,.12);color:#bbf7d0}

/* (NOUVEAU) Boutons très contrastés pour labels/switch si besoin */
.btn{
  display:inline-flex;align-items:center;justify-content:center;
  gap:.5rem;border-radius:.65rem;padding:.55rem .9rem;
  border:1px solid var(--border);
}
.btn-primary{background:#4338ca;color:#fff;border-color:#4f46e5}      /* indigo fort */
.btn-primary:hover{background:#4f46e5}
.btn-success{background:#059669;color:#fff;border-color:#10b981}      /* emerald fort */
.btn-success:hover{background:#10b981}
.btn-danger{background:#e11d48;color:#fff;border-color:#f43f5e}        /* rose/rouge fort */
.btn-danger:hover{background:#f43f5e}

/* Grille cartes (fallback si pas Tailwind) */
.cards-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem}
@media (min-width:640px){.cards-grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
@media (min-width:768px){.cards-grid{grid-template-columns:repeat(4,minmax(0,1fr))}}
@media (min-width:1280px){.cards-grid{grid-template-columns:repeat(5,minmax(0,1fr))}}

/* ───────── Flip 3D PROPRE (image droite, texte lisible) ───────── */
/* ---- FLIP 3D : carte + faces ---- */
.flip-scene{
  perspective: 1200px;              /* profondeur 3D */
}

.flip-card{
  position: relative;               /* ancre des enfants abs. */
  width: 100%;
  aspect-ratio: 4 / 5;              /* hauteur stable sans padding hack */
  border-radius: .75rem;
  overflow: hidden;                 /* rien ne déborde */
  border: 1px solid var(--border);
  background: var(--panel-weak);
  box-shadow: var(--shadow-sm);

  transform-style: preserve-3d;
  transform-origin: center center;
  transition: transform 700ms cubic-bezier(.22,.61,.36,1);
  will-change: transform;
}

.flip-card.is-revealed{
  transform: rotateY(180deg);
}

/* Perf cartes hors écran */
.card-content-visibility {
  content-visibility: auto;
  /* taille intrinsèque approximative pour éviter le “saut” à l’apparition */
  contain-intrinsic-size: 300px 375px; /* ~ ratio 4/5 de tes vignettes */
}

.flip-face{
  position: absolute;
  inset: 0;                          /* occupe toute la carte */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  overflow: hidden;                  /* coupe l’intérieur si besoin */
  transform: translateZ(0);
}

/* Avant : dos de carte */
.flip-front{
  display: grid;
  place-items: center;
  background:
    radial-gradient(60% 60% at 30% 30%, rgba(255,255,255,.08), transparent 40%),
    linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  z-index: 1;                        /* sous la face back quand révélée */
}

/* Arrière : PRÉ-tournée à 180° pour que son contenu soit lisible après flip */
.flip-back{
  position: absolute;
  inset: 0;
  transform: rotateY(180deg);
  background: var(--panel);
  z-index: 2;                        /* au-dessus du front quand révélé */
}
/* ---- Image (toujours montée) ---- */
.flip-back .art{
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover; object-position: center;
  opacity: 0;                        /* fade-in quand révélée */
  transition: opacity 140ms linear;
  transform: translateZ(0.01px);     /* stabilité compositing */
}

.flip-card.is-revealed .flip-back .art{
  opacity: 1;
}

/* L’image ne “flip” pas visuellement (ton astuce validée) */
.flip-back .no-flip{
  transform: rotateY(1deg) translateZ(0.01px);
  transform-style: preserve-3d;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* ---- LÉGENDE EN BAS, DANS LA CARTE ---- */
.flip-caption{
  position: absolute;
  left: 0; right: 0;
  bottom: 0;                         /* EN BAS de la carte */
  z-index: 3;                        /* au-dessus de l’image */
  padding: .45rem .6rem;

  background: rgba(0,0,0,.42);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);

  /* empêcher tout “décrochage” : reste dans la carte et ne dépasse pas */
  max-height: 45%;                   /* ajuste si tu veux plus/moins haut */
  overflow: hidden;                  /* coupe si trop long */
}

.flip-caption .name{
  font-size: .9rem; font-weight: 700; color: #fff;
}
.flip-caption .title{
  font-size: .72rem; color: rgba(255,255,255,.88);
}
.flip-caption .meta{
  margin-top: .25rem; display: flex; flex-wrap: wrap;
  gap: .25rem .35rem; color: #fff; font-size: 10px;
}
.flip-caption .pill{
  padding: 2px 6px; border-radius: 9999px;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.14);
}

/* Ligne d’infos/timer */
.info-row{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:space-between}
.progress{height:10px;border-radius:9999px;border:1px solid var(--border);background:rgba(255,255,255,.08);overflow:hidden}
.progress > .bar{height:100%;background:rgba(255,255,255,.5);transition:width .3s ease}

/* ============================================================= */
/*                 AJOUTS ACCESSIBILITÉ / UX                     */
/* ============================================================= */

/* (NOUVEAU) Skip link — à utiliser dans layout :
   <a href="#main" class="skip-link">Aller au contenu principal</a> */
.skip-link{
  position:absolute;left:8px;top:8px;padding:10px 12px;
  background:#111827;color:#fff;border-radius:10px;border:1px solid rgba(255,255,255,.15);
  box-shadow:0 10px 30px rgba(0,0,0,.4);
  transform:translateY(-200%);transition:transform .2s ease;
  z-index:1000;
}
.skip-link:focus{transform:translateY(0);outline:none}

/* (NOUVEAU) Focus visible contrasté (clavier) — boost a11y */
:focus-visible{
  outline:2px solid #818cf8; /* indigo-400 */
  outline-offset:2px;
}

/* (NOUVEAU) Utilitaire sr-only (si jamais Tailwind n’est pas chargé avant) */
.sr-only{
  position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;
  clip:rect(0,0,0,0);white-space:nowrap;border:0
}
.not-sr-only{
  position:static;width:auto;height:auto;padding:0;margin:0;overflow:visible;
  clip:auto;white-space:normal
}

/* (NOUVEAU) Respect des préférences d’animation — améliore l’accessibilité */
@media (prefers-reduced-motion: reduce){
  *{animation:none !important;transition:none !important;scroll-behavior:auto !important}
}

/* Évite le coût du background fixe sur mobile */
@media (max-width: 1024px) {
  body { background-attachment: scroll !important; }
}

/* Option : ne peins pas une section hors-écran tant qu’elle n’est pas visible */
.cv-auto { content-visibility: auto; contain-intrinsic-size: 800px 600px; }

